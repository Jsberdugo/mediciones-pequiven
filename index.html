<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Registros de PSI</title>
  <!-- Cargar Bootstrap CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
</head>
<body>
  <!-- Contenido aquí -->
  <div class="container mt-4">
  <h1>Registros de PSI</h1>
  <table class="table">
    <thead>
      <tr>
        <th>Fecha y hora</th>
        <th>Nombre</th>
        <th>Valor PSI</th>
      </tr>
    </thead>
    <tbody>
      <!-- Aquí se agregarán los registros dinámicamente -->
    </tbody>
  </table>

  <h2>Agregar nuevo registro</h2>
  <form id="nuevoRegistro">
    <div class="form-group">
      <label for="fechaHora">Fecha y hora:</label>
      <input type="datetime-local" class="form-control" id="fechaHora" name="fechaHora" required>
    </div>
    <div class="form-group">
      <label for="nombre">Nombre:</label>
      <input type="text" class="form-control" id="nombre" name="nombre" required>
    </div>
    <div class="form-group">
      <label for="valor">Valor PSI:</label>
      <input type="number" class="form-control" id="valor" name="valor" required>
    </div>
    <button type="submit" class="btn btn-primary">Agregar</button>

    <script>
  // Array de registros
  let registros = [];

  // Función para agregar un nuevo registro
  function agregarRegistro(event) {
    event.preventDefault();
    const nuevoRegistro = {
      fechaHora: document.getElementById('fechaHora').value,
      nombre: document.getElementById('nombre').value,
      valor: document.getElementById('valor').value
    };
    registros.push(nuevoRegistro);
    mostrarRegistros();
    document.getElementById('nuevoRegistro').reset();
  }

  // Función para mostrar los registros
  function mostrarRegistros() {
    // Ordenar los registros por fecha y hora
    registros.sort((a, b) => (new Date(a.fechaHora) < new Date(b.fechaHora)) ? 1 : -1);
    // Limpiar la tabla
    const tbody = document.querySelector('tbody');
    tbody.innerHTML = '';
    // Agregar cada registro a la tabla
    registros.forEach(registro => {
      const tr = document.createElement('tr');
      const fechaHoraTd = document.createElement('td');
      fechaHoraTd.innerText = registro.fechaHora;
      tr.appendChild(fechaHoraTd);
      const nombreTd = document.createElement('td');
      nombreTd.innerText = registro.nombre;
      tr.appendChild(nombreTd);
      const valorTd = document.createElement('td');
      valorTd.innerText = registro.valor + ' psi';
      tr.appendChild(valorTd);
      tbody.appendChild(tr);
    });
  }

  // Asignar el controlador de eventos al formulario
  document.getElementById('nuevoRegistro').addEventListener('submit', agregarRegistro);
</script>

<!-- Incluir la biblioteca Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<!-- Crear el lienzo para el gráfico -->
<canvas id="grafico"></canvas>

<script>
  // Función para mostrar el gráfico comparativo
  function mostrarGrafico() {
    // Obtener los valores de psi y fechas de los registros
    const valores = [];
    const fechas = [];
    registros.forEach(registro => {
      valores.push(registro.valor);
      fechas.push(registro.fechaHora);
    });

    // Crear el gráfico utilizando Chart.js
    const ctx = document.getElementById('grafico').getContext('2d');
    const chart = new Chart(ctx, {
      type: 'line',
      data: {
        labels: fechas,
        datasets: [{
          label: 'Valores en psi',
          data: valores,
          backgroundColor: 'rgba(255, 99, 132, 0.2)',
          borderColor: 'rgba(255, 99, 132, 1)',
          borderWidth: 1
        }]
      },
      options: {
        scales: {
          y: {
            beginAtZero: true
          }
        }
      }
    });
  }

  // Llamar a la función para mostrar el gráfico al cargar la página
  window.onload = mostrarGrafico;
</script>

<!-- Incluir la biblioteca Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<!-- Crear el lienzo para el gráfico -->
<canvas id="grafico"></canvas>

<!-- Agregar el botón "Mostrar Gráfica" -->
<button id="mostrar-grafica">Mostrar Gráfica</button>

<script>
  // Función para mostrar el gráfico comparativo
  function mostrarGrafico() {
    // Obtener los valores de psi y fechas de los registros
    const valores = [];
    const fechas = [];
    registros.forEach(registro => {
      valores.push(registro.valor);
      fechas.push(registro.fechaHora);
    });

    // Crear el gráfico utilizando Chart.js
    const ctx = document.getElementById('grafico').getContext('2d');
    const chart = new Chart(ctx, {
      type: 'line',
      data: {
        labels: fechas,
        datasets: [{
          label: 'Valores en psi',
          data: valores,
          backgroundColor: 'rgba(255, 99, 132, 0.2)',
          borderColor: 'rgba(255, 99, 132, 1)',
          borderWidth: 1
        }]
      },
      options: {
        scales: {
          y: {
            beginAtZero: true
          }
        }
      }
    });
  }

  // Asociar un controlador de eventos de clic al botón "Mostrar Gráfica"
  document.getElementById('mostrar-grafica').addEventListener('click', mostrarGrafico);
</script>


  <!-- Cargar Bootstrap JS -->
  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
</body>
</html>
